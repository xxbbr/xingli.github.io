<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>兴利调度系统</title>
    <style>
        :root {
            --primary-color: #1976d2;
            --primary-light: #e3f2fd;
            --primary-dark: #0d47a1;
            --secondary-color: #388e3c;
            --text-color: #333;
            --text-secondary: #666;
            --border-color: #ddd;
            --background-light: #f5f7fa;
            --card-shadow: 0 2px 8px rgba(0,0,0,0.1);
            --success-color: #4caf50;
            --danger-color: #f44336;
            --warning-color: #ff9800;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
        }
        
        body {
            background-color: var(--background-light);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .card-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-success {
            background-color: var(--success-color);
            color: white;
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }
        
        .btn-warning {
            background-color: var(--warning-color);
            color: white;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .table-responsive {
            overflow-x: auto;
            width: 100%;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        thead th {
            background-color: var(--primary-light);
            color: var(--primary-dark);
            font-weight: bold;
            text-align: left;
            padding: 12px 15px;
            border-bottom: 2px solid var(--primary-color);
        }
        
        tbody td {
            padding: 10px 15px;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }
        
        tbody tr:hover {
            background-color: var(--background-light);
        }
        
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .badge-success {
            background-color: #e8f5e9;
            color: var(--success-color);
        }
        
        .badge-warning {
            background-color: #fff3e0;
            color: var(--warning-color);
        }
        
        .badge-danger {
            background-color: #ffebee;
            color: var(--danger-color);
        }
        
        .badge-primary {
            background-color: #e3f2fd;
            color: var(--primary-color);
        }
        
        .search-box {
            display: flex;
            margin-bottom: 20px;
        }
        
        .search-input {
            flex: 1;
            padding: 8px 15px;
            border: 1px solid var(--border-color);
            border-radius: 4px 0 0 4px;
            font-size: 14px;
        }
        
        .search-btn {
            padding: 8px 15px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
        }
        
        .pagination {
            display: flex;
            justify-content: flex-end;
            margin-top: 20px;
        }
        
        .page-item {
            width: 30px;
            height: 30px;
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .page-item:hover {
            background-color: var(--primary-light);
        }
        
        .page-item.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 14px;
        }
        
        .form-control {
            width: 100%;
            padding: 8px 15px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .form-col {
            flex: 1;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            padding: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .modal-close {
            cursor: pointer;
            font-size: 20px;
            color: var(--text-secondary);
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }
        
        .tabs {
            display: flex;
            background-color: white;
            margin-bottom: 20px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
        }
        
        .tab {
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            flex: 1;
            text-align: center;
        }
        
        .tab:hover {
            background-color: var(--primary-light);
        }
        
        .tab.active {
            color: var(--primary-color);
            font-weight: bold;
            background-color: var(--primary-light);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .dashboard-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            flex: 1;
            min-width: 200px;
            background-color: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            padding: 15px;
        }
        
        .stat-title {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .stat-desc {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .chart-container {
            width: 100%;
            height: 300px;
            background-color: var(--background-light);
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .chart-placeholder {
            color: var(--text-secondary);
            text-align: center;
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .alert-icon {
            margin-right: 10px;
        }
        
        .alert-info {
            background-color: var(--primary-light);
            color: var(--primary-dark);
            border-left: 4px solid var(--primary-color);
        }
        
        .alert-warning {
            background-color: #fff3e0;
            color: #e65100;
            border-left: 4px solid var(--warning-color);
        }
        
        .progress-container {
            width: 100%;
            height: 8px;
            background-color: #f5f5f5;
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background-color: var(--success-color);
            border-radius: 4px;
        }
        
        .progress-bar-warning {
            background-color: var(--warning-color);
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .dashboard-stats {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 水库状况信息卡片 -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">水库实时运行状况</div>
                <button class="btn btn-outline" onclick="refreshReservoirStatus()">刷新</button>
            </div>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-title">当前水位</div>
                    <div class="stat-value">1723.85 m</div>
                    <div class="stat-desc">距汛限水位: -0.15 m</div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">当前库容</div>
                    <div class="stat-value">1250 万m³</div>
                    <div class="stat-desc">蓄水率: 82.0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">当日兴利供水</div>
                    <div class="stat-value">19.5 m³/s</div>
                    <div class="stat-desc">灌溉: 18.0 | 生活: 1.5</div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">当日入库流量</div>
                    <div class="stat-value">15.8 m³/s</div>
                    <div class="stat-desc">较昨日: +2.3 m³/s</div>
                </div>
            </div>
            
            <div class="alert alert-info">
                <div class="alert-icon">ℹ️</div>
                <div>
                    <strong>当前调度状态：</strong>主汛期兴利调度阶段（2024年6月1日至9月30日），在确保防洪安全前提下开展灌溉和生活供水调度
                </div>
            </div>
        </div>
        
        <!-- 导航选项卡 -->
        <div class="tabs">
            <div class="tab" data-tab="dashboard">1. 综合概览</div>
            <div class="tab" data-tab="schedule">2. 调度计划</div>
            <div class="tab" data-tab="tasks">3. 调度任务</div>
            <div class="tab active" data-tab="irrigation">4. 灌溉调度</div>
            <div class="tab" data-tab="water-supply">5. 生活供水</div>
            <div class="tab" data-tab="statistics">6. 统计评估</div>
        </div>
        
        <!-- 1. 综合概览 -->
        <div class="tab-content" id="dashboard">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">兴利调度执行概况</div>
                    <div>
                        <span id="last-update-time" style="margin-right: 15px; color: var(--text-secondary);">最后更新时间: 2024-06-15 14:30</span>
                        <button class="btn btn-outline" onclick="refreshDashboard()">刷新数据</button>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-placeholder">年度兴利供水计划与实际对比图</div>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-title">年度灌溉计划完成率</div>
                        <div class="stat-value">62.5%</div>
                        <div class="progress-container">
                            <div class="progress-bar" style="width: 62.5%"></div>
                        </div>
                        <div class="stat-desc">计划: 5220万m³ | 已完成: 3265万m³</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">年度供水计划完成率</div>
                        <div class="stat-value">62.1%</div>
                        <div class="progress-container">
                            <div class="progress-bar" style="width: 62.1%"></div>
                        </div>
                        <div class="stat-desc">计划: 580万m³ | 已完成: 360万m³</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">年度总效益</div>
                        <div class="stat-value">2850万元</div>
                        <div class="stat-desc">灌溉: 2200万元 | 供水: 650万元</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">近期调度任务</div>
                    <button class="btn btn-primary" onclick="switchToTab('tasks')">查看全部</button>
                </div>
                
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>任务ID</th>
                                <th>任务名称</th>
                                <th>任务类型</th>
                                <th>计划时间</th>
                                <th>执行人员</th>
                                <th>状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>T20240615001</td>
                                <td>大田镇日常供水</td>
                                <td>生活供水</td>
                                <td>2024-06-15 全天</td>
                                <td>马工</td>
                                <td><span class="badge badge-success">已完成</span></td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewTask('T20240615001')">查看</button>
                                </td>
                            </tr>
                            <tr>
                                <td>T20240615002</td>
                                <td>东部灌区水稻灌溉</td>
                                <td>灌溉调度</td>
                                <td>2024-06-15 14:00-22:00</td>
                                <td>赵工、孙工</td>
                                <td><span class="badge badge-warning">进行中</span></td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewTask('T20240615002')">查看</button>
                                </td>
                            </tr>
                            <tr>
                                <td>T20240616001</td>
                                <td>南部灌区果园灌溉</td>
                                <td>灌溉调度</td>
                                <td>2024-06-16 08:00-14:00</td>
                                <td>王工</td>
                                <td><span class="badge badge-primary">未开始</span></td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewTask('T20240616001')">查看</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">水资源利用情况</div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-placeholder">水资源利用效率分析图</div>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-title">灌溉水利用率</div>
                        <div class="stat-value">0.65</div>
                        <div class="stat-desc">较去年提升: +0.07</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">供水保证率</div>
                        <div class="stat-value">99.5%</div>
                        <div class="stat-desc">满足居民生活用水需求</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">有效灌溉面积</div>
                        <div class="stat-value">5.4万亩</div>
                        <div class="stat-desc">远期规划: 10万亩</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">受益人口</div>
                        <div class="stat-value">8.2万人</div>
                        <div class="stat-desc">大田镇: 4.8万人 | 平地镇: 3.4万人</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 2. 调度计划 -->
        <div class="tab-content" id="schedule">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">调度计划管理</div>
                    <button class="btn btn-primary" onclick="openAddScheduleModal()">添加计划</button>
                </div>
                
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="搜索调度计划...">
                    <button class="search-btn">搜索</button>
                </div>
                
                <div class="table-responsive">
                    <table id="schedule-table">
                        <thead>
                            <tr>
                                <th>计划ID</th>
                                <th>计划名称</th>
                                <th>计划类型</th>
                                <th>计划周期</th>
                                <th>开始日期</th>
                                <th>结束日期</th>
                                <th>计划水量(万m³)</th>
                                <th>状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>SP2024001</td>
                                <td>2024年度兴利调度总计划</td>
                                <td>年度计划</td>
                                <td>年度</td>
                                <td>2024-01-01</td>
                                <td>2024-12-31</td>
                                <td>5800</td>
                                <td><span class="badge badge-primary">执行中</span></td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewSchedule('SP2024001')">查看</button>
                                    <button class="btn btn-primary" onclick="editSchedule('SP2024001')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteSchedule('SP2024001')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>SP2024006</td>
                                <td>2024年6月兴利调度计划</td>
                                <td>月度计划</td>
                                <td>月度</td>
                                <td>2024-06-01</td>
                                <td>2024-06-30</td>
                                <td>828</td>
                                <td><span class="badge badge-primary">执行中</span></td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewSchedule('SP2024006')">查看</button>
                                    <button class="btn btn-primary" onclick="editSchedule('SP2024006')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteSchedule('SP2024006')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>SP20240624</td>
                                <td>2024年第25周兴利调度计划</td>
                                <td>周计划</td>
                                <td>周</td>
                                <td>2024-06-17</td>
                                <td>2024-06-23</td>
                                <td>130</td>
                                <td><span class="badge badge-warning">未开始</span></td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewSchedule('SP20240624')">查看</button>
                                    <button class="btn btn-primary" onclick="editSchedule('SP20240624')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteSchedule('SP20240624')">删除</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination">
                    <div class="page-item">«</div>
                    <div class="page-item active">1</div>
                    <div class="page-item">2</div>
                    <div class="page-item">»</div>
                </div>
            </div>
            
            <!-- 计划项目表 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">计划项目管理</div>
                    <button class="btn btn-primary" onclick="openAddScheduleItemModal()">添加计划项目</button>
                </div>
                
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="搜索计划项目...">
                    <button class="search-btn">搜索</button>
                </div>
                
                <div class="table-responsive">
                    <table id="schedule-item-table">
                        <thead>
                            <tr>
                                <th>项目ID</th>
                                <th>关联计划</th>
                                <th>项目名称</th>
                                <th>项目类型</th>
                                <th>供水对象</th>
                                <th>计划水量(万m³)</th>
                                <th>已完成量(万m³)</th>
                                <th>完成率</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>SI20240001</td>
                                <td>SP2024001</td>
                                <td>2024年度农业灌溉</td>
                                <td>灌溉</td>
                                <td>全部灌区</td>
                                <td>5220</td>
                                <td>3265</td>
                                <td>62.5%</td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewScheduleItem('SI20240001')">查看</button>
                                    <button class="btn btn-primary" onclick="editScheduleItem('SI20240001')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteScheduleItem('SI20240001')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>SI20240002</td>
                                <td>SP2024001</td>
                                <td>2024年度生活供水</td>
                                <td>供水</td>
                                <td>全部区域</td>
                                <td>580</td>
                                <td>360</td>
                                <td>62.1%</td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewScheduleItem('SI20240002')">查看</button>
                                    <button class="btn btn-primary" onclick="editScheduleItem('SI20240002')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteScheduleItem('SI20240002')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>SI20240601</td>
                                <td>SP2024006</td>
                                <td>2024年6月农业灌溉</td>
                                <td>灌溉</td>
                                <td>全部灌区</td>
                                <td>780</td>
                                <td>565</td>
                                <td>72.4%</td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewScheduleItem('SI20240601')">查看</button>
                                    <button class="btn btn-primary" onclick="editScheduleItem('SI20240601')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteScheduleItem('SI20240601')">删除</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination">
                    <div class="page-item">«</div>
                    <div class="page-item active">1</div>
                    <div class="page-item">2</div>
                    <div class="page-item">»</div>
                </div>
            </div>
        </div>
        
        <!-- 3. 调度任务 -->
        <div class="tab-content" id="tasks">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">调度任务管理</div>
                    <button class="btn btn-primary" onclick="openAddTaskModal()">添加任务</button>
                </div>
                
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="搜索调度任务...">
                    <button class="search-btn">搜索</button>
                </div>
                
                <div class="table-responsive">
                    <table id="task-table">
                        <thead>
                            <tr>
                                <th>任务ID</th>
                                <th>任务名称</th>
                                <th>任务类型</th>
                                <th>计划时间</th>
                                <th>关联计划</th>
                                <th>执行人员</th>
                                <th>状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>T20240615001</td>
                                <td>大田镇日常供水</td>
                                <td>生活供水</td>
                                <td>2024-06-15 全天</td>
                                <td>SP2024006</td>
                                <td>马工</td>
                                <td><span class="badge badge-success">已完成</span></td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewTask('T20240615001')">查看</button>
                                    <button class="btn btn-primary" onclick="editTask('T20240615001')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteTask('T20240615001')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>T20240615002</td>
                                <td>东部灌区水稻灌溉</td>
                                <td>灌溉调度</td>
                                <td>2024-06-15 14:00-22:00</td>
                                <td>SP2024006</td>
                                <td>赵工、孙工</td>
                                <td><span class="badge badge-warning">进行中</span></td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewTask('T20240615002')">查看</button>
                                    <button class="btn btn-primary" onclick="editTask('T20240615002')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteTask('T20240615002')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>T20240616001</td>
                                <td>南部灌区果园灌溉</td>
                                <td>灌溉调度</td>
                                <td>2024-06-16 08:00-14:00</td>
                                <td>SP2024006</td>
                                <td>王工</td>
                                <td><span class="badge badge-primary">未开始</span></td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewTask('T20240616001')">查看</button>
                                    <button class="btn btn-primary" onclick="editTask('T20240616001')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteTask('T20240616001')">删除</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination">
                    <div class="page-item">«</div>
                    <div class="page-item active">1</div>
                    <div class="page-item">2</div>
                    <div class="page-item">»</div>
                </div>
            </div>
            
            <!-- 任务执行跟踪 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">任务执行跟踪</div>
                </div>
                
                <div class="alert alert-info">
                    <div class="alert-icon">ℹ️</div>
                    <div>
                        <strong>当前进行中任务：</strong>东部灌区水稻灌溉 (T20240615002)，已执行2小时15分钟，计划供水量20.16万m³，已完成5.67万m³ (28.1%)
                    </div>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-title">任务执行进度</div>
                        <div class="stat-value">28.1%</div>
                        <div class="progress-container">
                            <div class="progress-bar" style="width: 28.1%"></div>
                        </div>
                        <div class="stat-desc">计划: 20.16万m³ | 已完成: 5.67万m³</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">闸门开度</div>
                        <div class="stat-value">20%</div>
                        <div class="stat-desc">放水洞闸门</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">当前流量</div>
                        <div class="stat-value">7.0 m³/s</div>
                        <div class="stat-desc">与计划一致</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">水库水位变化</div>
                        <div class="stat-value">-0.02 m</div>
                        <div class="stat-desc">当前水位: 1723.85 m</div>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 15px;">
                    <button class="btn btn-warning">调整流量</button>
                    <button class="btn btn-danger">终止任务</button>
                    <button class="btn btn-success">完成任务</button>
                </div>
            </div>
        </div>
        
        <!-- 4. 灌溉调度 -->
        <div class="tab-content active" id="irrigation">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">灌区管理</div>
                    <button class="btn btn-primary" onclick="openAddIrrigationModal()">添加灌区</button>
                </div>
                
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="搜索灌区...">
                    <button class="search-btn">搜索</button>
                </div>
                
                <div class="table-responsive">
                    <table id="irrigation-table">
                        <thead>
                            <tr>
                                <th>灌区名称</th>
                                <th>灌溉面积(万亩)</th>
                                <th>主要作物</th>
                                <th>年度计划用水量(万m³)</th>
                                <th>已用水量(万m³)</th>
                                <th>完成率</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>东部灌区</td>
                                <td>2.0</td>
                                <td>水稻</td>
                                <td>320</td>
                                <td>240</td>
                                <td>75.0%</td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewIrrigationDetail('东部灌区')">查看</button>
                                    <button class="btn btn-primary" onclick="editIrrigation('东部灌区')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteIrrigation('东部灌区')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>西部灌区</td>
                                <td>1.5</td>
                                <td>玉米</td>
                                <td>185</td>
                                <td>145</td>
                                <td>78.4%</td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewIrrigationDetail('西部灌区')">查看</button>
                                    <button class="btn btn-primary" onclick="editIrrigation('西部灌区')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteIrrigation('西部灌区')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>南部灌区</td>
                                <td>1.2</td>
                                <td>果园</td>
                                <td>155</td>
                                <td>95</td>
                                <td>61.3%</td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewIrrigationDetail('南部灌区')">查看</button>
                                    <button class="btn btn-primary" onclick="editIrrigation('南部灌区')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteIrrigation('南部灌区')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>北部灌区</td>
                                <td>0.7</td>
                                <td>蔬菜</td>
                                <td>120</td>
                                <td>85</td>
                                <td>70.8%</td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewIrrigationDetail('北部灌区')">查看</button>
                                    <button class="btn btn-primary" onclick="editIrrigation('北部灌区')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteIrrigation('北部灌区')">删除</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination">
                    <div class="page-item">«</div>
                    <div class="page-item active">1</div>
                    <div class="page-item">»</div>
                </div>
            </div>

            <!-- 灌溉记录表 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">灌溉调度记录</div>
                    <button class="btn btn-primary" onclick="openAddIrrigationRecordModal()">添加记录</button>
                </div>
                
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="搜索灌溉记录...">
                    <button class="search-btn">搜索</button>
                </div>
                
                <div class="table-responsive">
                    <table id="irrigation-record-table">
                        <thead>
                            <tr>
                                <th>记录ID</th>
                                <th>灌区</th>
                                <th>调度日期</th>
                                <th>调度时间</th>
                                <th>供水流量(m³/s)</th>
                                <th>供水量(万m³)</th>
                                <th>状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>IR20240615001</td>
                                <td>东部灌区</td>
                                <td>2024-06-15</td>
                                <td>14:00-22:00</td>
                                <td>7.0</td>
                                <td>20.16</td>
                                <td><span class="badge badge-warning">进行中</span></td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewIrrigationRecord('IR20240615001')">查看</button>
                                    <button class="btn btn-primary" onclick="editIrrigationRecord('IR20240615001')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteIrrigationRecord('IR20240615001')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>IR20240614001</td>
                                <td>西部灌区</td>
                                <td>2024-06-14</td>
                                <td>10:00-18:00</td>
                                <td>5.0</td>
                                <td>14.40</td>
                                <td><span class="badge badge-success">已完成</span></td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewIrrigationRecord('IR20240614001')">查看</button>
                                    <button class="btn btn-primary" onclick="editIrrigationRecord('IR20240614001')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteIrrigationRecord('IR20240614001')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>IR20240616001</td>
                                <td>南部灌区</td>
                                <td>2024-06-16</td>
                                <td>08:00-14:00</td>
                                <td>4.0</td>
                                <td>8.64</td>
                                <td><span class="badge badge-primary">未开始</span></td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewIrrigationRecord('IR20240616001')">查看</button>
                                    <button class="btn btn-primary" onclick="editIrrigationRecord('IR20240616001')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteIrrigationRecord('IR20240616001')">删除</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination">
                    <div class="page-item">«</div>
                    <div class="page-item active">1</div>
                    <div class="page-item">2</div>
                    <div class="page-item">»</div>
                </div>
            </div>
            
            <!-- 灌溉效益分析 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">灌溉效益分析</div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-placeholder">灌溉效益分析图</div>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-title">年度灌溉效益</div>
                        <div class="stat-value">2200万元</div>
                        <div class="stat-desc">较去年同期增长: +8.5%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">单方水效益</div>
                        <div class="stat-value">0.67元/m³</div>
                        <div class="stat-desc">较去年提升: +0.05元/m³</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">灌溉水利用率</div>
                        <div class="stat-value">0.65</div>
                        <div class="stat-desc">较去年提升: +0.07</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">农业增产效益</div>
                        <div class="stat-value">15.2%</div>
                        <div class="stat-desc">水稻单产增加: +90kg/亩</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 5. 生活供水 -->
        <div class="tab-content" id="water-supply">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">供水区域管理</div>
                    <button class="btn btn-primary" onclick="openAddWaterSupplyModal()">添加供水区域</button>
                </div>
                
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="搜索供水区域...">
                    <button class="search-btn">搜索</button>
                </div>
                
                <div class="table-responsive">
                    <table id="water-supply-table">
                        <thead>
                            <tr>
                                <th>供水区域</th>
                                <th>供水类型</th>
                                <th>服务人口(万人)</th>
                                <th>年度计划量(万m³)</th>
                                <th>已供水量(万m³)</th>
                                <th>完成率</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>大田镇</td>
                                <td>生活用水</td>
                                <td>4.8</td>
                                <td>348</td>
                                <td>220</td>
                                <td>63.2%</td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewWaterSupply('大田镇')">查看</button>
                                    <button class="btn btn-primary" onclick="editWaterSupply('大田镇')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteWaterSupply('大田镇')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>平地镇</td>
                                <td>生活用水</td>
                                <td>3.4</td>
                                <td>235</td>
                                <td>140</td>
                                <td>59.6%</td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewWaterSupply('平地镇')">查看</button>
                                    <button class="btn btn-primary" onclick="editWaterSupply('平地镇')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteWaterSupply('平地镇')">删除</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination">
                    <div class="page-item">«</div>
                    <div class="page-item active">1</div>
                    <div class="page-item">»</div>
                </div>
            </div>

            <!-- 供水记录表 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">供水调度记录</div>
                    <button class="btn btn-primary" onclick="openAddWaterSupplyRecordModal()">添加记录</button>
                </div>
                
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="搜索供水记录...">
                    <button class="search-btn">搜索</button>
                </div>
                
                <div class="table-responsive">
                    <table id="water-supply-record-table">
                        <thead>
                            <tr>
                                <th>记录ID</th>
                                <th>供水区域</th>
                                <th>调度日期</th>
                                <th>供水流量(m³/s)</th>
                                <th>日供水量(万m³)</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>WS20240615001</td>
                                <td>大田镇</td>
                                <td>2024-06-15</td>
                                <td>0.9</td>
                                <td>7.78</td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewWaterSupplyRecord('WS20240615001')">查看</button>
                                    <button class="btn btn-primary" onclick="editWaterSupplyRecord('WS20240615001')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteWaterSupplyRecord('WS20240615001')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>WS20240615002</td>
                                <td>平地镇</td>
                                <td>2024-06-15</td>
                                <td>0.6</td>
                                <td>5.18</td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewWaterSupplyRecord('WS20240615002')">查看</button>
                                    <button class="btn btn-primary" onclick="editWaterSupplyRecord('WS20240615002')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteWaterSupplyRecord('WS20240615002')">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td>WS20240614001</td>
                                <td>大田镇</td>
                                <td>2024-06-14</td>
                                <td>0.9</td>
                                <td>7.78</td>
                                <td>
                                    <button class="btn btn-outline" onclick="viewWaterSupplyRecord('WS20240614001')">查看</button>
                                    <button class="btn btn-primary" onclick="editWaterSupplyRecord('WS20240614001')">编辑</button>
                                    <button class="btn btn-danger" onclick="deleteWaterSupplyRecord('WS20240614001')">删除</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination">
                    <div class="page-item">«</div>
                    <div class="page-item active">1</div>
                    <div class="page-item">2</div>
                    <div class="page-item">»</div>
                </div>
            </div>
        </div>
        
        <!-- 6. 统计评估 -->
        <div class="tab-content" id="statistics">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">兴利调度效益评估</div>
                    <div>
                        <span style="margin-right: 15px; color: var(--text-secondary);">统计周期: 2024年1月1日 - 2024年6月15日</span>
                        <button class="btn btn-outline" onclick="exportReport()">导出报表</button>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-placeholder">兴利调度效益综合评估图</div>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-title">综合效益</div>
                        <div class="stat-value">2850万元</div>
                        <div class="stat-desc">灌溉: 2200万元 | 供水: 650万元</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">年度总用水</div>
                        <div class="stat-value">3625万m³</div>
                        <div class="stat-desc">总计划: 5800万m³ | 完成率: 62.5%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">单方水效益</div>
                        <div class="stat-value">0.79元/m³</div>
                        <div class="stat-desc">较去年提升: +0.06元/m³</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">水资源利用率</div>
                        <div class="stat-value">82.5%</div>
                        <div class="stat-desc">较去年提升: +3.8%</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">各项指标完成情况</div>
                </div>
                
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>指标名称</th>
                                <th>年度目标</th>
                                <th>当前完成</th>
                                <th>完成率</th>
                                <th>状态</th>
                                <th>评估结果</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>灌溉用水</td>
                                <td>5220万m³</td>
                                <td>3265万m³</td>
                                <td>
                                    62.5%
                                    <div class="progress-container">
                                        <div class="progress-bar" style="width: 62.5%"></div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">正常</span></td>
                                <td>按照灌溉计划有序实施，满足作物生长需求</td>
                            </tr>
                            <tr>
                                <td>生活供水</td>
                                <td>580万m³</td>
                                <td>360万m³</td>
                                <td>
                                    62.1%
                                    <div class="progress-container">
                                        <div class="progress-bar" style="width: 62.1%"></div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">正常</span></td>
                                <td>保证率达到99.5%，满足居民生活用水需求</td>
                            </tr>
                            <tr>
                                <td>灌溉水利用率</td>
                                <td>0.65</td>
                                <td>0.65</td>
                                <td>
                                    100.0%
                                    <div class="progress-container">
                                        <div class="progress-bar" style="width: 100%"></div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">优秀</span></td>
                                <td>渠系配套和节水措施有效提高了水利用效率</td>
                            </tr>
                            <tr>
                                <td>有效灌溉面积</td>
                                <td>5.4万亩</td>
                                <td>5.4万亩</td>
                                <td>
                                    100.0%
                                    <div class="progress-container">
                                        <div class="progress-bar" style="width: 100%"></div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">优秀</span></td>
                                <td>完成计划目标，远期可达10万亩</td>
                            </tr>
                            <tr>
                                <td>单方水效益</td>
                                <td>0.75元/m³</td>
                                <td>0.79元/m³</td>
                                <td>
                                    105.3%
                                    <div class="progress-container">
                                        <div class="progress-bar" style="width: 100%"></div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">优秀</span></td>
                                <td>超额完成目标，经济效益显著</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">水资源利用综合评价</div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-placeholder">水资源利用综合评价图</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">综合评价结论</label>
                    <div style="border: 1px solid var(--border-color); border-radius: 4px; padding: 15px; background-color: #f9f9f9;">
                        <p>本年度兴利调度工作开展良好，各项指标基本达到预期目标。特别是在水稻抽穗关键期增加灌溉供水，有效保障了粮食生产。城镇生活供水保证率高，大田镇和平地镇居民生活用水得到充分保障。</p>
                        <p style="margin-top: 10px;">跃进水库目前有效灌溉面积5.4万亩，灌溉效益显著，随着渠系配套和节水措施的广泛应用，远期灌溉面积有望扩大至约10万亩，进一步提高区域农业生产能力。水库作为攀枝花市城市集中式饮用水源地二级保护区，在城市饮用水安全保障中发挥重要作用。</p>
                        <p style="margin-top: 10px;">兴利调度与防洪调度协调良好，始终在确保防洪安全的前提下开展兴利供水。调度原则执行得当，供水优先序严格遵循生活用水优先、农业灌溉次之的原则。</p>
                    </div>
                </div>
                
                <div style="display: flex; gap: 10px; margin-top: 15px;">
                    <div style="flex: 1;">
                        <div class="form-group">
                            <label class="form-label">存在问题</label>
                            <textarea class="form-control" rows="5" readonly>1. 部分灌区渠系配套不完善，制约灌溉效率进一步提高
2. 水库来水不稳定，部分时段来水偏少，影响兴利调度
3. 部分农业灌溉设施老化，渠道渗漏损失较大
4. 气候变化导致降雨时空分布不均，增加了调度难度
5. 防洪与兴利目标在汛期有一定冲突，需进一步协调平衡</textarea>
                        </div>
                    </div>
                    <div style="flex: 1;">
                        <div class="form-group">
                            <label class="form-label">建议措施</label>
                            <textarea class="form-control" rows="5" readonly>1. 加快推进灌区渠系配套建设，推广节水灌溉技术
2. 加强水情预报能力建设，提高兴利调度的科学性和前瞻性
3. 实施农业灌溉设施更新改造，降低渠道渗漏损失
4. 加强气象水文监测，提高应对气候变化的调度能力
5. 深化防洪与兴利的协调机制，研究优化调度方案
6. 规划实施远期10万亩灌溉工程，科学分步骤推进</textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 灌区添加/编辑模态框 -->
    <div class="modal" id="irrigation-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="irrigation-modal-title">添加灌区</div>
                <span class="modal-close" onclick="closeModal('irrigation-modal')">&times;</span>
            </div>
            <form id="irrigation-form">
                <div class="form-group">
                    <label class="form-label">灌区名称 <span style="color: red;">*</span></label>
                    <input type="text" class="form-control" id="irrigation-name" required>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">灌溉面积(万亩) <span style="color: red;">*</span></label>
                            <input type="number" class="form-control" id="irrigation-area" step="0.1" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">主要作物 <span style="color: red;">*</span></label>
                            <input type="text" class="form-control" id="irrigation-crop" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">年度计划用水量(万m³) <span style="color: red;">*</span></label>
                            <input type="number" class="form-control" id="irrigation-plan-water" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">已用水量(万m³)</label>
                            <input type="number" class="form-control" id="irrigation-used-water">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">灌区描述</label>
                    <textarea class="form-control" id="irrigation-description" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" onclick="closeModal('irrigation-modal')">取消</button>
                    <button type="submit" class="btn btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 灌溉记录添加/编辑模态框 -->
    <div class="modal" id="irrigation-record-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="irrigation-record-modal-title">添加灌溉记录</div>
                <span class="modal-close" onclick="closeModal('irrigation-record-modal')">&times;</span>
            </div>
            <form id="irrigation-record-form">
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">灌区 <span style="color: red;">*</span></label>
                            <select class="form-control" id="irrigation-record-area" required>
                                <option value="">请选择灌区</option>
                                <option value="东部灌区">东部灌区</option>
                                <option value="西部灌区">西部灌区</option>
                                <option value="南部灌区">南部灌区</option>
                                <option value="北部灌区">北部灌区</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">调度日期 <span style="color: red;">*</span></label>
                            <input type="date" class="form-control" id="irrigation-record-date" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">开始时间 <span style="color: red;">*</span></label>
                            <input type="time" class="form-control" id="irrigation-record-start-time" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">结束时间 <span style="color: red;">*</span></label>
                            <input type="time" class="form-control" id="irrigation-record-end-time" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">供水流量(m³/s) <span style="color: red;">*</span></label>
                            <input type="number" class="form-control" id="irrigation-record-flow" step="0.1" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">供水量(万m³) <span style="color: red;">*</span></label>
                            <input type="number" class="form-control" id="irrigation-record-water" step="0.01" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">状态 <span style="color: red;">*</span></label>
                            <select class="form-control" id="irrigation-record-status" required>
                                <option value="已完成">已完成</option>
                                <option value="进行中">进行中</option>
                                <option value="未开始">未开始</option>
                                <option value="已取消">已取消</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">执行人</label>
                            <input type="text" class="form-control" id="irrigation-record-executor">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">备注</label>
                    <textarea class="form-control" id="irrigation-record-remarks" rows="2"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" onclick="closeModal('irrigation-record-modal')">取消</button>
                    <button type="submit" class="btn btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 供水区域添加/编辑模态框 -->
    <div class="modal" id="water-supply-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="water-supply-modal-title">添加供水区域</div>
                <span class="modal-close" onclick="closeModal('water-supply-modal')">&times;</span>
            </div>
            <form id="water-supply-form">
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">供水区域名称 <span style="color: red;">*</span></label>
                            <input type="text" class="form-control" id="water-supply-name" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">供水类型 <span style="color: red;">*</span></label>
                            <select class="form-control" id="water-supply-type" required>
                                <option value="生活用水">生活用水</option>
                                <option value="备用水源">备用水源</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">服务人口(万人) <span style="color: red;">*</span></label>
                            <input type="number" class="form-control" id="water-supply-population" step="0.1" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">保证率(%) <span style="color: red;">*</span></label>
                            <input type="number" class="form-control" id="water-supply-guarantee" step="0.1" max="100" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">年度计划量(万m³) <span style="color: red;">*</span></label>
                            <input type="number" class="form-control" id="water-supply-plan" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">已供水量(万m³)</label>
                            <input type="number" class="form-control" id="water-supply-used">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">区域描述</label>
                    <textarea class="form-control" id="water-supply-description" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" onclick="closeModal('water-supply-modal')">取消</button>
                    <button type="submit" class="btn btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 供水记录添加/编辑模态框 -->
    <div class="modal" id="water-supply-record-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="water-supply-record-modal-title">添加供水记录</div>
                <span class="modal-close" onclick="closeModal('water-supply-record-modal')">&times;</span>
            </div>
            <form id="water-supply-record-form">
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">供水区域 <span style="color: red;">*</span></label>
                            <select class="form-control" id="water-supply-record-area" required>
                                <option value="">请选择供水区域</option>
                                <option value="大田镇">大田镇</option>
                                <option value="平地镇">平地镇</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">调度日期 <span style="color: red;">*</span></label>
                            <input type="date" class="form-control" id="water-supply-record-date" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">供水流量(m³/s) <span style="color: red;">*</span></label>
                            <input type="number" class="form-control" id="water-supply-record-flow" step="0.1" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">日供水量(万m³) <span style="color: red;">*</span></label>
                            <input type="number" class="form-control" id="water-supply-record-water" step="0.01" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">执行人</label>
                            <input type="text" class="form-control" id="water-supply-record-executor">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">状态 <span style="color: red;">*</span></label>
                            <select class="form-control" id="water-supply-record-status" required>
                                <option value="已完成">已完成</option>
                                <option value="进行中">进行中</option>
                                <option value="未开始">未开始</option>
                                <option value="已取消">已取消</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">备注</label>
                    <textarea class="form-control" id="water-supply-record-remarks" rows="2"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" onclick="closeModal('water-supply-record-modal')">取消</button>
                    <button type="submit" class="btn btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 调度计划添加/编辑模态框 -->
    <div class="modal" id="schedule-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="schedule-modal-title">添加调度计划</div>
                <span class="modal-close" onclick="closeModal('schedule-modal')">&times;</span>
            </div>
            <form id="schedule-form">
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">计划名称 <span style="color: red;">*</span></label>
                            <input type="text" class="form-control" id="schedule-name" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">计划类型 <span style="color: red;">*</span></label>
                            <select class="form-control" id="schedule-type" required>
                                <option value="年度计划">年度计划</option>
                                <option value="月度计划">月度计划</option>
                                <option value="周计划">周计划</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">计划周期 <span style="color: red;">*</span></label>
                            <select class="form-control" id="schedule-period" required>
                                <option value="年度">年度</option>
                                <option value="月度">月度</option>
                                <option value="周">周</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">计划水量(万m³) <span style="color: red;">*</span></label>
                            <input type="number" class="form-control" id="schedule-water" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">开始日期 <span style="color: red;">*</span></label>
                            <input type="date" class="form-control" id="schedule-start-date" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">结束日期 <span style="color: red;">*</span></label>
                            <input type="date" class="form-control" id="schedule-end-date" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">状态 <span style="color: red;">*</span></label>
                            <select class="form-control" id="schedule-status" required>
                                <option value="执行中">执行中</option>
                                <option value="未开始">未开始</option>
                                <option value="已完成">已完成</option>
                                <option value="已取消">已取消</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">责任人</label>
                            <input type="text" class="form-control" id="schedule-manager">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">计划描述</label>
                    <textarea class="form-control" id="schedule-description" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" onclick="closeModal('schedule-modal')">取消</button>
                    <button type="submit" class="btn btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 计划项目添加/编辑模态框 -->
    <div class="modal" id="schedule-item-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="schedule-item-modal-title">添加计划项目</div>
                <span class="modal-close" onclick="closeModal('schedule-item-modal')">&times;</span>
            </div>
            <form id="schedule-item-form">
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">关联计划 <span style="color: red;">*</span></label>
                            <select class="form-control" id="schedule-item-plan" required>
                                <option value="">请选择计划</option>
                                <option value="SP2024001">2024年度兴利调度总计划</option>
                                <option value="SP2024006">2024年6月兴利调度计划</option>
                                <option value="SP20240624">2024年第25周兴利调度计划</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">项目名称 <span style="color: red;">*</span></label>
                            <input type="text" class="form-control" id="schedule-item-name" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">项目类型 <span style="color: red;">*</span></label>
                            <select class="form-control" id="schedule-item-type" required>
                                <option value="灌溉">灌溉</option>
                                <option value="供水">供水</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">供水对象 <span style="color: red;">*</span></label>
                            <input type="text" class="form-control" id="schedule-item-target" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">计划水量(万m³) <span style="color: red;">*</span></label>
                            <input type="number" class="form-control" id="schedule-item-water" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">已完成量(万m³)</label>
                            <input type="number" class="form-control" id="schedule-item-completed">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">项目说明</label>
                    <textarea class="form-control" id="schedule-item-description" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" onclick="closeModal('schedule-item-modal')">取消</button>
                    <button type="submit" class="btn btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 调度任务添加/编辑模态框 -->
    <div class="modal" id="task-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="task-modal-title">添加调度任务</div>
                <span class="modal-close" onclick="closeModal('task-modal')">&times;</span>
            </div>
            <form id="task-form">
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">任务名称 <span style="color: red;">*</span></label>
                            <input type="text" class="form-control" id="task-name" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">任务类型 <span style="color: red;">*</span></label>
                            <select class="form-control" id="task-type" required>
                                <option value="灌溉调度">灌溉调度</option>
                                <option value="生活供水">生活供水</option>
                                <option value="备用水源管理">备用水源管理</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">计划日期 <span style="color: red;">*</span></label>
                            <input type="date" class="form-control" id="task-date" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">计划时间</label>
                            <input type="text" class="form-control" id="task-time" placeholder="例：全天 或 14:00-22:00">
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">关联计划</label>
                            <select class="form-control" id="task-plan">
                                <option value="">请选择计划</option>
                                <option value="SP2024001">2024年度兴利调度总计划</option>
                                <option value="SP2024006">2024年6月兴利调度计划</option>
                                <option value="SP20240624">2024年第25周兴利调度计划</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">执行人员 <span style="color: red;">*</span></label>
                            <input type="text" class="form-control" id="task-executor" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">状态 <span style="color: red;">*</span></label>
                            <select class="form-control" id="task-status" required>
                                <option value="未开始">未开始</option>
                                <option value="进行中">进行中</option>
                                <option value="已完成">已完成</option>
                                <option value="已取消">已取消</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">优先级</label>
                            <select class="form-control" id="task-priority">
                                <option value="高">高</option>
                                <option value="中" selected>中</option>
                                <option value="低">低</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">任务内容 <span style="color: red;">*</span></label>
                    <textarea class="form-control" id="task-content" rows="3" required></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" onclick="closeModal('task-modal')">取消</button>
                    <button type="submit" class="btn btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // 选项卡切换
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // 移除所有 active 类
                    document.querySelectorAll('.tab').forEach(t => {
                        t.classList.remove('active');
                    });
                    
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // 添加 active 类到当前选项卡
                    this.classList.add('active');
                    
                    // 显示对应内容
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        });
        
        // 打开模态框
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }
        
        // 关闭模态框
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        // 刷新水库状态
        function refreshReservoirStatus() {
            alert('正在刷新水库状态数据...');
            // 在实际应用中，这里应该从服务器获取最新的水库状态数据
        }
        
        // 刷新概览数据
        function refreshDashboard() {
            alert('正在刷新概览数据...');
            // 在实际应用中，这里应该从服务器获取最新的概览数据
            
            // 更新最后更新时间
            const now = new Date();
            const timeString = now.getFullYear() + '-' + 
                              padZero(now.getMonth() + 1) + '-' + 
                              padZero(now.getDate()) + ' ' + 
                              padZero(now.getHours()) + ':' + 
                              padZero(now.getMinutes());
            document.getElementById('last-update-time').textContent = '最后更新时间: ' + timeString;
        }
        
        // 切换到指定标签页
        function switchToTab(tabId) {
            document.querySelector(`.tab[data-tab="${tabId}"]`).click();
        }
        
        // 导出报表
        function exportReport() {
            alert('正在生成并导出兴利调度效益评估报表...');
            // 在实际应用中，这里应该生成报表并提供下载
        }
        
        // 数字补零函数
        function padZero(num) {
            return num < 10 ? '0' + num : num;
        }
        
        // 灌区管理功能
        function openAddIrrigationModal() {
            document.getElementById('irrigation-modal-title').textContent = '添加灌区';
            document.getElementById('irrigation-form').reset();
            openModal('irrigation-modal');
        }
        
        function viewIrrigationDetail(name) {
            alert(`查看灌区: ${name}`);
            // 在实际应用中，这里应该发送请求获取详细信息，然后展示在页面上
        }
        
        function editIrrigation(name) {
            document.getElementById('irrigation-modal-title').textContent = '编辑灌区';
            
            // 在实际应用中，这里应该发送请求获取详细信息，然后填充表单
            // 这里仅作为演示，使用硬编码数据
            if (name === '东部灌区') {
                document.getElementById('irrigation-name').value = '东部灌区';
                document.getElementById('irrigation-area').value = '2.0';
                document.getElementById('irrigation-crop').value = '水稻';
                document.getElementById('irrigation-plan-water').value = '320';
                document.getElementById('irrigation-used-water').value = '240';
                document.getElementById('irrigation-description').value = '主要种植水稻，是水库最大的灌区之一';
            }
            
            openModal('irrigation-modal');
        }
        
        function deleteIrrigation(name) {
            if (confirm(`确定要删除灌区: ${name} 吗？`)) {
                // 在实际应用中，这里应该发送删除请求
                alert(`已删除灌区: ${name}`);
            }
        }
        
        // 灌溉记录管理功能
        function openAddIrrigationRecordModal() {
            document.getElementById('irrigation-record-modal-title').textContent = '添加灌溉记录';
            document.getElementById('irrigation-record-form').reset();
            openModal('irrigation-record-modal');
        }
        
        function viewIrrigationRecord(id) {
            alert(`查看灌溉记录: ${id}`);
            // 在实际应用中，这里应该发送请求获取详细信息，然后展示在页面上
        }
        
        function editIrrigationRecord(id) {
            document.getElementById('irrigation-record-modal-title').textContent = '编辑灌溉记录';
            
            // 在实际应用中，这里应该发送请求获取详细信息，然后填充表单
            // 这里仅作为演示，使用硬编码数据
            if (id === 'IR20240615001') {
                document.getElementById('irrigation-record-area').value = '东部灌区';
                document.getElementById('irrigation-record-date').value = '2024-06-15';
                document.getElementById('irrigation-record-start-time').value = '14:00';
                document.getElementById('irrigation-record-end-time').value = '22:00';
                document.getElementById('irrigation-record-flow').value = '7.0';
                document.getElementById('irrigation-record-water').value = '20.16';
                document.getElementById('irrigation-record-status').value = '进行中';
                document.getElementById('irrigation-record-executor').value = '赵工、孙工';
                document.getElementById('irrigation-record-remarks').value = '水稻抽穗期灌溉，水位和流量正常';
            }
            
            openModal('irrigation-record-modal');
        }
        
        function deleteIrrigationRecord(id) {
            if (confirm(`确定要删除灌溉记录: ${id} 吗？`)) {
                // 在实际应用中，这里应该发送删除请求
                alert(`已删除灌溉记录: ${id}`);
            }
        }
        
        // 供水区域管理功能
        function openAddWaterSupplyModal() {
            document.getElementById('water-supply-modal-title').textContent = '添加供水区域';
            document.getElementById('water-supply-form').reset();
            openModal('water-supply-modal');
        }
        
        function viewWaterSupply(name) {
            alert(`查看供水区域: ${name}`);
            // 在实际应用中，这里应该发送请求获取详细信息，然后展示在页面上
        }
        
        function editWaterSupply(name) {
            document.getElementById('water-supply-modal-title').textContent = '编辑供水区域';
            
            // 在实际应用中，这里应该发送请求获取详细信息，然后填充表单
            // 这里仅作为演示，使用硬编码数据
            if (name === '大田镇') {
                document.getElementById('water-supply-name').value = '大田镇';
                document.getElementById('water-supply-type').value = '生活用水';
                document.getElementById('water-supply-population').value = '4.8';
                document.getElementById('water-supply-guarantee').value = '98';
                document.getElementById('water-supply-plan').value = '348';
                document.getElementById('water-supply-used').value = '220';
                document.getElementById('water-supply-description').value = '大田镇居民生活用水，共计4.8万人';
            }
            
            openModal('water-supply-modal');
        }
        
        function deleteWaterSupply(name) {
            if (confirm(`确定要删除供水区域: ${name} 吗？`)) {
                // 在实际应用中，这里应该发送删除请求
                alert(`已删除供水区域: ${name}`);
            }
        }
        
        // 供水记录管理功能
        function openAddWaterSupplyRecordModal() {
            document.getElementById('water-supply-record-modal-title').textContent = '添加供水记录';
            document.getElementById('water-supply-record-form').reset();
            openModal('water-supply-record-modal');
        }
        
        function viewWaterSupplyRecord(id) {
            alert(`查看供水记录: ${id}`);
            // 在实际应用中，这里应该发送请求获取详细信息，然后展示在页面上
        }
        
        function editWaterSupplyRecord(id) {
            document.getElementById('water-supply-record-modal-title').textContent = '编辑供水记录';
            
            // 在实际应用中，这里应该发送请求获取详细信息，然后填充表单
            // 这里仅作为演示，使用硬编码数据
            if (id === 'WS20240615001') {
                document.getElementById('water-supply-record-area').value = '大田镇';
                document.getElementById('water-supply-record-date').value = '2024-06-15';
                document.getElementById('water-supply-record-flow').value = '0.9';
                document.getElementById('water-supply-record-water').value = '7.78';
                document.getElementById('water-supply-record-executor').value = '马工';
                document.getElementById('water-supply-record-status').value = '已完成';
                document.getElementById('water-supply-record-remarks').value = '供水正常';
            }
            
            openModal('water-supply-record-modal');
        }
        
        function deleteWaterSupplyRecord(id) {
            if (confirm(`确定要删除供水记录: ${id} 吗？`)) {
                // 在实际应用中，这里应该发送删除请求
                alert(`已删除供水记录: ${id}`);
            }
        }
        
        // 调度计划管理功能
        function openAddScheduleModal() {
            document.getElementById('schedule-modal-title').textContent = '添加调度计划';
            document.getElementById('schedule-form').reset();
            openModal('schedule-modal');
        }
        
        function viewSchedule(id) {
            alert(`查看调度计划: ${id}`);
            // 在实际应用中，这里应该发送请求获取详细信息，然后展示在页面上
        }
        
        function editSchedule(id) {
            document.getElementById('schedule-modal-title').textContent = '编辑调度计划';
            
            // 在实际应用中，这里应该发送请求获取详细信息，然后填充表单
            // 这里仅作为演示，使用硬编码数据
            if (id === 'SP2024006') {
                document.getElementById('schedule-name').value = '2024年6月兴利调度计划';
                document.getElementById('schedule-type').value = '月度计划';
                document.getElementById('schedule-period').value = '月度';
                document.getElementById('schedule-water').value = '828';
                document.getElementById('schedule-start-date').value = '2024-06-01';
                document.getElementById('schedule-end-date').value = '2024-06-30';
                document.getElementById('schedule-status').value = '执行中';
                document.getElementById('schedule-manager').value = '张工';
                document.getElementById('schedule-description').value = '2024年6月兴利调度计划，包括农业灌溉和生活供水';
            }
            
            openModal('schedule-modal');
        }
        
        function deleteSchedule(id) {
            if (confirm(`确定要删除调度计划: ${id} 吗？`)) {
                // 在实际应用中，这里应该发送删除请求
                alert(`已删除调度计划: ${id}`);
            }
        }
        
        // 计划项目管理功能
        function openAddScheduleItemModal() {
            document.getElementById('schedule-item-modal-title').textContent = '添加计划项目';
            document.getElementById('schedule-item-form').reset();
            openModal('schedule-item-modal');
        }
        
        function viewScheduleItem(id) {
            alert(`查看计划项目: ${id}`);
            // 在实际应用中，这里应该发送请求获取详细信息，然后展示在页面上
        }
        
        function editScheduleItem(id) {
            document.getElementById('schedule-item-modal-title').textContent = '编辑计划项目';
            
            // 在实际应用中，这里应该发送请求获取详细信息，然后填充表单
            // 这里仅作为演示，使用硬编码数据
            if (id === 'SI20240601') {
                document.getElementById('schedule-item-plan').value = 'SP2024006';
                document.getElementById('schedule-item-name').value = '2024年6月农业灌溉';
                document.getElementById('schedule-item-type').value = '灌溉';
                document.getElementById('schedule-item-target').value = '全部灌区';
                document.getElementById('schedule-item-water').value = '780';
                document.getElementById('schedule-item-completed').value = '565';
                document.getElementById('schedule-item-description').value = '2024年6月农业灌溉计划，主要为水稻抽穗期灌溉';
            }
            
            openModal('schedule-item-modal');
        }
        
        function deleteScheduleItem(id) {
            if (confirm(`确定要删除计划项目: ${id} 吗？`)) {
                // 在实际应用中，这里应该发送删除请求
                alert(`已删除计划项目: ${id}`);
            }
        }
        
        // 调度任务管理功能
        function openAddTaskModal() {
            document.getElementById('task-modal-title').textContent = '添加调度任务';
            document.getElementById('task-form').reset();
            openModal('task-modal');
        }
        
        function viewTask(id) {
            alert(`查看调度任务: ${id}`);
            // 在实际应用中，这里应该发送请求获取详细信息，然后展示在页面上
        }
        
        function editTask(id) {
            document.getElementById('task-modal-title').textContent = '编辑调度任务';
            
            // 在实际应用中，这里应该发送请求获取详细信息，然后填充表单
            // 这里仅作为演示，使用硬编码数据
            if (id === 'T20240615002') {
                document.getElementById('task-name').value = '东部灌区水稻灌溉';
                document.getElementById('task-type').value = '灌溉调度';
                document.getElementById('task-date').value = '2024-06-15';
                document.getElementById('task-time').value = '14:00-22:00';
                document.getElementById('task-plan').value = 'SP2024006';
                document.getElementById('task-executor').value = '赵工、孙工';
                document.getElementById('task-status').value = '进行中';
                document.getElementById('task-priority').value = '中';
                document.getElementById('task-content').value = '为东部灌区水稻提供抽穗期灌溉用水，调整放水洞闸门开度至20%，供水流量控制在7.0m³/s';
            }
            
            openModal('task-modal');
        }
        
        function deleteTask(id) {
            if (confirm(`确定要删除调度任务: ${id} 吗？`)) {
                // 在实际应用中，这里应该发送删除请求
                alert(`已删除调度任务: ${id}`);
            }
        }
        
        // 表单提交处理
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('irrigation-form').addEventListener('submit', function(e) {
                e.preventDefault();
                // 在实际应用中，这里应该发送表单数据到服务器
                alert('保存灌区信息成功！');
                closeModal('irrigation-modal');
            });
            
            document.getElementById('irrigation-record-form').addEventListener('submit', function(e) {
                e.preventDefault();
                // 在实际应用中，这里应该发送表单数据到服务器
                alert('保存灌溉记录成功！');
                closeModal('irrigation-record-modal');
            });
            
            document.getElementById('water-supply-form').addEventListener('submit', function(e) {
                e.preventDefault();
                // 在实际应用中，这里应该发送表单数据到服务器
                alert('保存供水区域信息成功！');
                closeModal('water-supply-modal');
            });
            
            document.getElementById('water-supply-record-form').addEventListener('submit', function(e) {
                e.preventDefault();
                // 在实际应用中，这里应该发送表单数据到服务器
                alert('保存供水记录成功！');
                closeModal('water-supply-record-modal');
            });
            
            document.getElementById('schedule-form').addEventListener('submit', function(e) {
                e.preventDefault();
                // 在实际应用中，这里应该发送表单数据到服务器
                alert('保存调度计划成功！');
                closeModal('schedule-modal');
            });
            
            document.getElementById('schedule-item-form').addEventListener('submit', function(e) {
                e.preventDefault();
                // 在实际应用中，这里应该发送表单数据到服务器
                alert('保存计划项目成功！');
                closeModal('schedule-item-modal');
            });
            
            document.getElementById('task-form').addEventListener('submit', function(e) {
                e.preventDefault();
                // 在实际应用中，这里应该发送表单数据到服务器
                alert('保存调度任务成功！');
                closeModal('task-modal');
            });
        });
    </script>
</body>
</html>
